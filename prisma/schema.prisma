// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  name         String?
  password     String
  hasUsedTrial Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  cvs          CV[]
}

model CV {
  id     String @id @default(cuid())
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Personal Information
  fullName String
  email    String
  phone    String?
  location String?
  website  String?
  linkedin String?
  github   String?
  summary  String?

  // Photo
  photoUrl String?

  // Experience
  experience String? // JSON string of work experiences

  // Education
  education String? // JSON string of education entries

  // Skills
  skills String? // JSON string of skills

  // Languages
  languages String? // JSON string of languages with proficiency

  // Projects
  projects String? // JSON string of projects

  // Certifications
  certifications String? // JSON string of certifications

  // Template & Settings
  templateId  String @default("modern")
  language    String @default("en") // 'en' or 'ar'
  accentColor String @default("#3B82F6")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
}
